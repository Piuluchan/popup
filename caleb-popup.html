<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>妹妹</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: '微软雅黑', Arial, sans-serif;
            overflow: hidden;
            background: #000;
        }

        .window {
            position: fixed;
            width: 350px;
            min-height: 120px;
            background: black;
            border: 2px solid red;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.5);
        }

        .window-header {
            background: #1a1a1a;
            color: red;
            padding: 8px 12px;
            font-weight: bold;
            border-bottom: 1px solid red;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: move;
        }

        .close-btn {
            background: none;
            border: none;
            color: red;
            font-size: 20px;
            cursor: pointer;
            padding: 0 5px;
        }

        .close-btn:hover {
            color: #ff4444;
        }

        .window-content {
            padding: 20px;
            color: red;
            font-size: 14px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            flex: 1;
        }

        .final-window {
            width: 600px;
            min-height: 250px;
            z-index: 10000;
        }

        .final-window .window-content {
            font-size: 25px;
            font-weight: bold;
            padding: 40px;
        }

        .hint {
            position: fixed;
            bottom: 20px;
            right: 20px;
            color: red;
            background: rgba(0, 0, 0, 0.8);
            padding: 10px 20px;
            border: 1px solid red;
            border-radius: 5px;
            z-index: 999;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="hint">按空格键关闭所有窗口</div>

    <script>
        const tips = [
            '好啊，那你需要什么？我都可以答应。',
            '你想要回临空，我们就回临空',
            '你想回到从前，我们就把老宅翻修，一起住过去',
            '一座房子不够，那就给你建一座迷宫',
            '我会在里面给你准备最好的一切，把它建成世界上最漂亮的花园',
            '有我陪着你，以后他们就再也找不到你了。',
            '一上大学就跟出笼的小鸟似的，这么久没回来，家里东西在哪都不记得了吧。',
            '不许走，别留我一个人。',
            '总是听不到你说想见我，我可以把它当作你想我的证据吗。',
            '我的弱点还要确认吗？',
            '不需要……呵，好啊。只要你打得过我，我就信你不会被欺负。',
            '来吧，让我看看我不在的时候你都学了些什么。',
            '就你这个样子，还说不需要我？',
            '搬离了家里，见识到外面的世界，就想把过去的一切都丢下不管了吗？',
            '当年不是你先牵住我的手，让我做你的哥哥的吗？',
            '现在你觉得自己长大了，就要松开这只手了吗？',
            '我一直想要和你在同一边的世界，而不是只能看着你，想象你。',
            '我们是同源而生，不管多少次，请唤醒我。',
            '但我们出生的那一刻就烙下的约定，我从来没有违背。',
            '意识也好，躯体也罢，即便这些都不复存在，我的灵魂也仍然回与你同频。',
            '说好了，生和死，都不再分开。'
        ];

        let windows = [];
        let isDragging = false;
        let currentWindow = null;
        let offsetX = 0;
        let offsetY = 0;

        function createWindow(text, isFinal = false, isFirst = false) {
            const win = document.createElement('div');
            win.className = isFinal ? 'window final-window' : 'window';
            
            const maxX = window.innerWidth - (isFinal ? 600 : 350);
            const maxY = window.innerHeight - (isFinal ? 250 : 120);
            const x = isFinal ? (window.innerWidth - 600) / 2 : Math.random() * maxX;
            const y = isFinal ? (window.innerHeight - 250) / 2 : Math.random() * maxY;
            
            win.style.left = x + 'px';
            win.style.top = y + 'px';
            
            win.innerHTML = `
                <div class="window-header">
                    <span>妹妹</span>
                    <button class="close-btn">×</button>
                </div>
                <div class="window-content">${text}</div>
            `;
            
            // 添加关闭按钮事件
            const closeBtn = win.querySelector('.close-btn');
            if (isFirst) {
                // 第一个窗口的关闭按钮触发批量弹窗
                closeBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    win.remove();
                    windows = windows.filter(w => w !== win);
                    createBatchWindows(100);
                });
            } else {
                // 其他窗口的关闭按钮关闭所有
                closeBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    closeAllWindows();
                });
            }
            
            // 添加拖拽功能
            const header = win.querySelector('.window-header');
            header.addEventListener('mousedown', (e) => {
                if (e.target.classList.contains('close-btn')) return;
                isDragging = true;
                currentWindow = win;
                offsetX = e.clientX - win.offsetLeft;
                offsetY = e.clientY - win.offsetTop;
                win.style.zIndex = isFinal ? 10000 : parseInt(win.style.zIndex || 1000) + 1;
            });
            
            document.body.appendChild(win);
            windows.push(win);
            
            return win;
        }

        document.addEventListener('mousemove', (e) => {
            if (isDragging && currentWindow) {
                currentWindow.style.left = (e.clientX - offsetX) + 'px';
                currentWindow.style.top = (e.clientY - offsetY) + 'px';
            }
        });

        document.addEventListener('mouseup', () => {
            isDragging = false;
            currentWindow = null;
        });

        function showSingleTip() {
            createWindow('不需要我？', false, true);
        }

        function createBatchWindows(count, index = 0) {
            if (index >= count) {
                setTimeout(() => showFinalTip(), 500);
                return;
            }
            
            const randomTip = tips[Math.floor(Math.random() * tips.length)];
            createWindow(randomTip);
            
            setTimeout(() => createBatchWindows(count, index + 1), 100);
        }

        function showFinalTip() {
            createWindow('说好了，生和死，都不再分开。', true);
        }

        function closeAllWindows() {
            windows.forEach(win => win.remove());
            windows = [];
            document.body.style.background = '#000';
        }

        // 空格键关闭所有窗口
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault();
                closeAllWindows();
            }
        });

        // 初始化：显示第一个窗口
        showSingleTip();
    </script>
</body>
</html>